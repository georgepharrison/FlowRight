<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class MustContextAwareRule&lt;T&gt; | FlowRight - Result Pattern Library for .NET </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class MustContextAwareRule&lt;T&gt; | FlowRight - Result Pattern Library for .NET ">
      
      <meta name="description" content="A context-aware validation rule that applies a custom condition function with access to validation context. This rule enables complex validation scenarios that require access to root objects, services, or custom data.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="FlowRight">
            FlowRight
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1">



  <h1 id="FlowRight_Validation_Rules_MustContextAwareRule_1" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1" class="text-break">
Class MustContextAwareRule&lt;T&gt;  
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="FlowRight.html">FlowRight</a>.<a class="xref" href="FlowRight.Validation.html">Validation</a>.<a class="xref" href="FlowRight.Validation.Rules.html">Rules</a></dd></dl>
  <dl><dt>Assembly</dt><dd>FlowRight.Validation.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>A context-aware validation rule that applies a custom condition function with access to validation context.
This rule enables complex validation scenarios that require access to root objects, services, or custom data.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class MustContextAwareRule&lt;T&gt; : IContextAwareRule&lt;T&gt;, IRule&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The type of value to validate.</p>
</dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><span class="xref">object</span></div>
      <div><span class="xref">MustContextAwareRule&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="FlowRight.Validation.Rules.IContextAwareRule-1.html">IContextAwareRule</a>&lt;T&gt;</div>
      <div><a class="xref" href="FlowRight.Validation.Rules.IRule-1.html">IRule</a>&lt;T&gt;</div>
    </dd>
  </dl>





  <h2 id="FlowRight_Validation_Rules_MustContextAwareRule_1_examples">Examples</h2>
  <pre><code class="lang-csharp">// Cross-property validation using root object
var rule = new MustContextAwareRule&lt;string&gt;(
    (email, context) =&gt; 
    {
        User? user = context.GetRootObject&lt;User&gt;();
        return user == null || !string.Equals(email, user.Username, StringComparison.OrdinalIgnoreCase);
    },
    "Email cannot be the same as username");

// Service integration validation
var serviceRule = new MustContextAwareRule&lt;string&gt;(
    (value, context) =&gt; 
    {
        IValidationService? service = context.GetService&lt;IValidationService&gt;();
        return service?.IsValid(value) ?? false;
    },
    "Value failed service validation");

// Custom data validation
var dataRule = new MustContextAwareRule&lt;int&gt;(
    (age, context) =&gt; 
    {
        int maxAge = context.GetCustomData&lt;int&gt;("MaxAllowedAge");
        return maxAge == 0 || age &lt;= maxAge;
    },
    "Age exceeds maximum allowed limit");</code></pre>


  <h2 id="FlowRight_Validation_Rules_MustContextAwareRule_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>
This rule extends the basic MustRule functionality to provide access to the validation context,
enabling validation logic that depends on:
<ul><li>Other properties of the root object being validated</li><li>External services accessed through dependency injection</li><li>Custom data shared between validation rules</li><li>Parent-child relationships in hierarchical validation</li><li>Previously executed validation rules and their results</li></ul>

<p>
The condition function should return true if the validation passes, or false if it fails.
When the condition returns false, the specified error message will be used as the validation error.
</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="FlowRight_Validation_Rules_MustContextAwareRule_1__ctor_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.#ctor*"></a>

  <h3 id="FlowRight_Validation_Rules_MustContextAwareRule_1__ctor_System_Func__0_FlowRight_Validation_Context_IValidationContext_System_Boolean__System_String_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.#ctor(System.Func{`0,FlowRight.Validation.Context.IValidationContext,System.Boolean},System.String)">
  MustContextAwareRule(Func&lt;T, IValidationContext, bool&gt;, string)
  
  </h3>

  <div class="markdown level1 summary"><p>A context-aware validation rule that applies a custom condition function with access to validation context.
This rule enables complex validation scenarios that require access to root objects, services, or custom data.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public MustContextAwareRule(Func&lt;T, IValidationContext, bool&gt; condition, string errorMessage)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>condition</code> <span class="xref">Func</span>&lt;T, <a class="xref" href="FlowRight.Validation.Context.IValidationContext.html">IValidationContext</a>, <span class="xref">bool</span>&gt;</dt>
    <dd><p>The condition function that receives both the value and validation context.</p>
</dd>
    <dt><code>errorMessage</code> <span class="xref">string</span></dt>
    <dd><p>The error message to return when validation fails.</p>
</dd>
  </dl>







  <h4 class="section" id="FlowRight_Validation_Rules_MustContextAwareRule_1__ctor_System_Func__0_FlowRight_Validation_Context_IValidationContext_System_Boolean__System_String__examples">Examples</h4>
  <pre><code class="lang-csharp">// Cross-property validation using root object
var rule = new MustContextAwareRule&lt;string&gt;(
    (email, context) =&gt; 
    {
        User? user = context.GetRootObject&lt;User&gt;();
        return user == null || !string.Equals(email, user.Username, StringComparison.OrdinalIgnoreCase);
    },
    "Email cannot be the same as username");

// Service integration validation
var serviceRule = new MustContextAwareRule&lt;string&gt;(
    (value, context) =&gt; 
    {
        IValidationService? service = context.GetService&lt;IValidationService&gt;();
        return service?.IsValid(value) ?? false;
    },
    "Value failed service validation");

// Custom data validation
var dataRule = new MustContextAwareRule&lt;int&gt;(
    (age, context) =&gt; 
    {
        int maxAge = context.GetCustomData&lt;int&gt;("MaxAllowedAge");
        return maxAge == 0 || age &lt;= maxAge;
    },
    "Age exceeds maximum allowed limit");</code></pre>


  <h4 class="section" id="FlowRight_Validation_Rules_MustContextAwareRule_1__ctor_System_Func__0_FlowRight_Validation_Context_IValidationContext_System_Boolean__System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This rule extends the basic MustRule functionality to provide access to the validation context,
enabling validation logic that depends on:
<ul><li>Other properties of the root object being validated</li><li>External services accessed through dependency injection</li><li>Custom data shared between validation rules</li><li>Parent-child relationships in hierarchical validation</li><li>Previously executed validation rules and their results</li></ul>

<p>
The condition function should return true if the validation passes, or false if it fails.
When the condition returns false, the specified error message will be used as the validation error.
</p>
</div>




  <h2 class="section" id="methods">Methods
</h2>


  <a id="FlowRight_Validation_Rules_MustContextAwareRule_1_Validate_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.Validate*"></a>

  <h3 id="FlowRight_Validation_Rules_MustContextAwareRule_1_Validate__0_System_String_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.Validate(`0,System.String)">
  Validate(T, string)
  
  </h3>

  <div class="markdown level1 summary"><p>Validates the value using the standard IRule interface (without context).
This implementation creates a minimal context for compatibility.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string? Validate(T value, string displayName)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>value</code> <span class="xref">T</span></dt>
    <dd><p>The value to validate.</p>
</dd>
    <dt><code>displayName</code> <span class="xref">string</span></dt>
    <dd><p>The display name for the property being validated.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">string</span></dt>
    <dd><p>The error message if validation fails; otherwise, null.</p>
</dd>
  </dl>







  <h4 class="section" id="FlowRight_Validation_Rules_MustContextAwareRule_1_Validate__0_System_String__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method provides fallback compatibility with the standard IRule interface.
When called without a context, a minimal empty context is created, which may
limit the functionality of context-dependent validation logic.</p>
</div>




  <a id="FlowRight_Validation_Rules_MustContextAwareRule_1_Validate_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.Validate*"></a>

  <h3 id="FlowRight_Validation_Rules_MustContextAwareRule_1_Validate__0_System_String_FlowRight_Validation_Context_IValidationContext_" data-uid="FlowRight.Validation.Rules.MustContextAwareRule`1.Validate(`0,System.String,FlowRight.Validation.Context.IValidationContext)">
  Validate(T, string, IValidationContext)
  
  </h3>

  <div class="markdown level1 summary"><p>Validates the value using the custom condition function with access to validation context.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string? Validate(T value, string displayName, IValidationContext context)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>value</code> <span class="xref">T</span></dt>
    <dd><p>The value to validate.</p>
</dd>
    <dt><code>displayName</code> <span class="xref">string</span></dt>
    <dd><p>The display name for the property being validated.</p>
</dd>
    <dt><code>context</code> <a class="xref" href="FlowRight.Validation.Context.IValidationContext.html">IValidationContext</a></dt>
    <dd><p>The validation context providing access to root object, services, and custom data.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">string</span></dt>
    <dd><p>The error message if the condition fails; otherwise, null.</p>
</dd>
  </dl>












</article>

        <div class="contribution d-print-none">
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          FlowRight - Explicit error handling without exceptions
        </div>
      </div>
    </footer>
  </body>
</html>
